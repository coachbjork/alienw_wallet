import{s as at,z as Ct,A as Bt,B as Mt,a as I,d as m,m as T,C as Yt,i as B,f,r as R,n as fe,v as it,D as jt,E as bl,F as Gt,G as Ie,M as gl,N as Tl,h as rt,O as ul,o as fl,P as cl,j as y,y as Lt,l as x,e as w,c as S,k as ae,Q as ie,w as ye,t as G,b as L,g as de,u as Nt,S as $t,W as zt}from"../chunks/scheduler.BGxGHEAh.js";import{S as ot,i as ut,f as El,c as Te,a as Ee,m as we,d as P,t as M,e as Se,g as Ce,b as Ne,h as xe,j as De}from"../chunks/index.DmCm9C9p.js";import{i as Ft,j as wl,s as dl,c as _l,g as d,t as lt,T as nt,e as $e}from"../chunks/bundle-mjs.fLspV5ki.js";import{P as Sl}from"../chunks/PlanetMenu.BaILbyHm.js";import{R as Cl}from"../chunks/RecursiveObjectDisplay.DEnn6NTK.js";import{g as Xt}from"../chunks/entry.CGGR1sSc.js";import{p as st}from"../chunks/session.CCA_5FAn.js";import{c as Pe,s as oe,a as Re}from"../chunks/index.B8QQQgBR.js";import{A as Nl}from"../chunks/Actions.574xcTYa.js";import{B as Al}from"../chunks/Badge.hK3lh8M_.js";import{b as kl,c as Il,a as Ol,d as Ul}from"../chunks/awReferendumService.CKSFft3o.js";import{S as ml}from"../chunks/Spinner.aPOk_JFp.js";import{h as Wt,C as Vl}from"../chunks/CrosshairsSolid.nzjNa-D0.js";function yl(l){let e,n,t,s,r,u=[{xmlns:"http://www.w3.org/2000/svg"},{fill:l[2]},l[5],{class:t=Ft("shrink-0",l[4][l[0]],l[6].class)},{role:l[1]},{"aria-label":l[3]},{viewBox:"0 0 24 24"}],i={};for(let a=0;a<u.length;a+=1)i=Ct(i,u[a]);return{c(){e=Bt("svg"),n=Bt("path"),this.h()},l(a){e=Mt(a,"svg",{xmlns:!0,fill:!0,class:!0,role:!0,"aria-label":!0,viewBox:!0});var v=I(e);n=Mt(v,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),I(n).forEach(m),v.forEach(m),this.h()},h(){T(n,"fill-rule","evenodd"),T(n,"d","M12 2c-.791 0-1.55.314-2.11.874l-.893.893a.985.985 0 0 1-.696.288H7.04A2.984 2.984 0 0 0 4.055 7.04v1.262a.986.986 0 0 1-.288.696l-.893.893a2.984 2.984 0 0 0 0 4.22l.893.893a.985.985 0 0 1 .288.696v1.262a2.984 2.984 0 0 0 2.984 2.984h1.262c.261 0 .512.104.696.288l.893.893a2.984 2.984 0 0 0 4.22 0l.893-.893a.985.985 0 0 1 .696-.288h1.262a2.984 2.984 0 0 0 2.984-2.984V15.7c0-.261.104-.512.288-.696l.893-.893a2.984 2.984 0 0 0 0-4.22l-.893-.893a.985.985 0 0 1-.288-.696V7.04a2.984 2.984 0 0 0-2.984-2.984h-1.262a.985.985 0 0 1-.696-.288l-.893-.893A2.984 2.984 0 0 0 12 2Zm3.683 7.73a1 1 0 1 0-1.414-1.413l-4.253 4.253-1.277-1.277a1 1 0 0 0-1.415 1.414l1.985 1.984a1 1 0 0 0 1.414 0l4.96-4.96Z"),T(n,"clip-rule","evenodd"),Yt(e,i)},m(a,v){B(a,e,v),f(e,n),s||(r=[R(e,"click",l[7]),R(e,"keydown",l[8]),R(e,"keyup",l[9]),R(e,"focus",l[10]),R(e,"blur",l[11]),R(e,"mouseenter",l[12]),R(e,"mouseleave",l[13]),R(e,"mouseover",l[14]),R(e,"mouseout",l[15])],s=!0)},p(a,[v]){Yt(e,i=wl(u,[{xmlns:"http://www.w3.org/2000/svg"},v&4&&{fill:a[2]},v&32&&a[5],v&65&&t!==(t=Ft("shrink-0",a[4][a[0]],a[6].class))&&{class:t},v&2&&{role:a[1]},v&8&&{"aria-label":a[3]},{viewBox:"0 0 24 24"}]))},i:fe,o:fe,d(a){a&&m(e),s=!1,it(r)}}}function xl(l,e,n){const t=["size","role","color","ariaLabel"];let s=jt(e,t);const r=bl("iconCtx")??{},u={xs:"w-3 h-3",sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6",xl:"w-8 h-8"};let{size:i=r.size||"md"}=e,{role:a=r.role||"img"}=e,{color:v=r.color||"currentColor"}=e,{ariaLabel:h="badge check solid"}=e;function A(N){Ie.call(this,l,N)}function E(N){Ie.call(this,l,N)}function c(N){Ie.call(this,l,N)}function o(N){Ie.call(this,l,N)}function p(N){Ie.call(this,l,N)}function b(N){Ie.call(this,l,N)}function _(N){Ie.call(this,l,N)}function C(N){Ie.call(this,l,N)}function k(N){Ie.call(this,l,N)}return l.$$set=N=>{n(6,e=Ct(Ct({},e),Gt(N))),n(5,s=jt(e,t)),"size"in N&&n(0,i=N.size),"role"in N&&n(1,a=N.role),"color"in N&&n(2,v=N.color),"ariaLabel"in N&&n(3,h=N.ariaLabel)},e=Gt(e),[i,a,v,h,u,s,e,A,E,c,o,p,b,_,C,k]}class Dl extends ot{constructor(e){super(),ut(this,e,xl,yl,at,{size:0,role:1,color:2,ariaLabel:3})}}function Ht(l){let e,n,t,s="New Referendum",r,u,i,a,v="Update Status",h,A,E,c,o="Vote Yes",p,b,_,C,k="Vote No",N,X,q,U,me="Vote Abstain",W,Y,le,Q,ne="Remove Vote",g,$,F,O,he="Cancel",ve,ue,Be,se,Oe="Execute",Ae,ke,j,ce,Me;return{c(){e=w("div"),n=w("div"),t=w("button"),t.textContent=s,i=y(),a=w("button"),a.textContent=v,E=y(),c=w("button"),c.textContent=o,_=y(),C=w("button"),C.textContent=k,q=y(),U=w("button"),U.textContent=me,le=y(),Q=w("button"),Q.textContent=ne,F=y(),O=w("button"),O.textContent=he,Be=y(),se=w("button"),se.textContent=Oe,this.h()},l(V){e=S(V,"DIV",{class:!0});var K=I(e);n=S(K,"DIV",{class:!0});var Z=I(n);t=S(Z,"BUTTON",{class:!0,"data-svelte-h":!0}),ae(t)!=="svelte-1lucceo"&&(t.textContent=s),i=x(Z),a=S(Z,"BUTTON",{class:!0,"data-svelte-h":!0}),ae(a)!=="svelte-1tkj4z9"&&(a.textContent=v),E=x(Z),c=S(Z,"BUTTON",{class:!0,"data-svelte-h":!0}),ae(c)!=="svelte-6jwu2l"&&(c.textContent=o),_=x(Z),C=S(Z,"BUTTON",{class:!0,"data-svelte-h":!0}),ae(C)!=="svelte-dqsnrl"&&(C.textContent=k),q=x(Z),U=S(Z,"BUTTON",{class:!0,"data-svelte-h":!0}),ae(U)!=="svelte-27h27w"&&(U.textContent=me),le=x(Z),Q=S(Z,"BUTTON",{class:!0,"data-svelte-h":!0}),ae(Q)!=="svelte-9yyadi"&&(Q.textContent=ne),F=x(Z),O=S(Z,"BUTTON",{class:!0,"data-svelte-h":!0}),ae(O)!=="svelte-12kidtn"&&(O.textContent=he),Be=x(Z),se=S(Z,"BUTTON",{class:!0,"data-svelte-h":!0}),ae(se)!=="svelte-1ajij9u"&&(se.textContent=Oe),Z.forEach(m),K.forEach(m),this.h()},h(){T(t,"class","min-w-8 basis-1/4 truncate text-wrap rounded-xl bg-indigo-500 p-2 text-center text-sm font-bold text-white hover:bg-indigo-700"),T(a,"class","min-w-8 basis-1/4 truncate text-wrap rounded-xl bg-teal-500 p-2 text-sm font-bold text-white hover:bg-teal-700"),ie(a,"hidden",!l[1].includes(d.ACTIONS.UPDATE_STATUS)),T(c,"class","min-w-8 basis-1/4 truncate text-wrap rounded-xl bg-green-500 p-2 text-sm font-bold text-white hover:bg-green-700"),ie(c,"hidden",!l[1].includes(d.ACTIONS.VOTE)),T(C,"class","min-w-8 basis-1/4 truncate text-wrap rounded-xl bg-red-500 p-2 text-sm font-bold text-white hover:bg-red-700"),ie(C,"hidden",!l[1].includes(d.ACTIONS.VOTE)),T(U,"class","min-w-8 basis-1/4 truncate text-wrap rounded-xl bg-gray-500 p-2 text-sm font-bold text-white hover:bg-gray-700"),ie(U,"hidden",!l[1].includes(d.ACTIONS.VOTE)),T(Q,"class","min-w-8 basis-1/4 truncate text-wrap rounded-xl bg-purple-500 p-2 text-sm font-bold text-white hover:bg-purple-700"),ie(Q,"hidden",!l[1].includes(d.ACTIONS.VOTE)),T(O,"class","min-w-8 basis-1/4 truncate text-wrap rounded-xl bg-yellow-500 p-2 text-sm font-bold text-white hover:bg-yellow-700"),ie(O,"hidden",!l[1].includes(d.ACTIONS.CANCEL)),T(se,"class","min-w-8 basis-1/4 truncate text-wrap rounded-xl bg-blue-500 p-2 text-sm font-bold text-white hover:bg-blue-700"),ie(se,"hidden",!l[1].includes(d.ACTIONS.EXECUTE)),T(n,"class","mb-20 flex flex-row-reverse flex-wrap justify-center gap-1 p-2 backdrop-blur-sm"),T(e,"class","fixed bottom-0 left-0 right-0 z-50 content-end md:hidden"),ie(e,"inset-0",l[2])},m(V,K){B(V,e,K),f(e,n),f(n,t),f(n,i),f(n,a),f(n,E),f(n,c),f(n,_),f(n,C),f(n,q),f(n,U),f(n,le),f(n,Q),f(n,F),f(n,O),f(n,Be),f(n,se),j=!0,ce||(Me=[R(t,"click",l[9]),R(a,"click",l[10]),R(c,"click",l[11]),R(C,"click",l[12]),R(U,"click",l[13]),R(Q,"click",l[14]),R(O,"click",l[15]),R(se,"click",l[16]),R(e,"click",l[17])],ce=!0)},p(V,K){(!j||K[0]&2)&&ie(a,"hidden",!V[1].includes(d.ACTIONS.UPDATE_STATUS)),(!j||K[0]&2)&&ie(c,"hidden",!V[1].includes(d.ACTIONS.VOTE)),(!j||K[0]&2)&&ie(C,"hidden",!V[1].includes(d.ACTIONS.VOTE)),(!j||K[0]&2)&&ie(U,"hidden",!V[1].includes(d.ACTIONS.VOTE)),(!j||K[0]&2)&&ie(Q,"hidden",!V[1].includes(d.ACTIONS.VOTE)),(!j||K[0]&2)&&ie(O,"hidden",!V[1].includes(d.ACTIONS.CANCEL)),(!j||K[0]&2)&&ie(se,"hidden",!V[1].includes(d.ACTIONS.EXECUTE)),(!j||K[0]&4)&&ie(e,"inset-0",V[2])},i(V){j||(V&&ye(()=>{j&&(u&&u.end(1),r=xe(t,oe,{axis:"y",duration:100,easing:Pe}),r.start())}),V&&ye(()=>{j&&(A&&A.end(1),h=xe(a,oe,{axis:"y",duration:100,easing:Pe}),h.start())}),V&&ye(()=>{j&&(b&&b.end(1),p=xe(c,oe,{axis:"y",duration:100,easing:Pe}),p.start())}),V&&ye(()=>{j&&(X&&X.end(1),N=xe(C,oe,{axis:"y",duration:100,easing:Pe}),N.start())}),V&&ye(()=>{j&&(Y&&Y.end(1),W=xe(U,oe,{axis:"y",duration:100,easing:Pe}),W.start())}),V&&ye(()=>{j&&($&&$.end(1),g=xe(Q,oe,{axis:"y",duration:100,easing:Pe}),g.start())}),V&&ye(()=>{j&&(ue&&ue.end(1),ve=xe(O,oe,{axis:"y",duration:100,easing:Pe}),ve.start())}),V&&ye(()=>{j&&(ke&&ke.end(1),Ae=xe(se,oe,{axis:"y",duration:100,easing:Pe}),Ae.start())}),j=!0)},o(V){r&&r.invalidate(),V&&(u=De(t,oe,{axis:"y",duration:100,easing:Re})),h&&h.invalidate(),V&&(A=De(a,oe,{axis:"y",duration:100,easing:Re})),p&&p.invalidate(),V&&(b=De(c,oe,{axis:"y",duration:100,easing:Re})),N&&N.invalidate(),V&&(X=De(C,oe,{axis:"y",duration:100,easing:Re})),W&&W.invalidate(),V&&(Y=De(U,oe,{axis:"y",duration:100,easing:Re})),g&&g.invalidate(),V&&($=De(Q,oe,{axis:"y",duration:100,easing:Re})),ve&&ve.invalidate(),V&&(ue=De(O,oe,{axis:"y",duration:100,easing:Re})),Ae&&Ae.invalidate(),V&&(ke=De(se,oe,{axis:"y",duration:100,easing:Re})),j=!1},d(V){V&&m(e),V&&u&&u.end(),V&&A&&A.end(),V&&b&&b.end(),V&&X&&X.end(),V&&Y&&Y.end(),V&&$&&$.end(),V&&ue&&ue.end(),V&&ke&&ke.end(),ce=!1,it(Me)}}}function Pl(l){let e,n="Login to call actions";return{c(){e=w("p"),e.textContent=n,this.h()},l(t){e=S(t,"P",{class:!0,"data-svelte-h":!0}),ae(e)!=="svelte-bvnls2"&&(e.textContent=n),this.h()},h(){T(e,"class","mt-5 text-center")},m(t,s){B(t,e,s)},p:fe,d(t){t&&m(e)}}}function Rl(l){let e,n,t="New Referendum",s,r=l[1].includes(d.ACTIONS.UPDATE_STATUS),u,i=l[1].includes(d.ACTIONS.VOTE),a,v=l[1].includes(d.ACTIONS.CANCEL),h,A=l[1].includes(d.ACTIONS.EXECUTE),E,c,o=r&&Qt(l),p=i&&Kt(l),b=v&&qt(l),_=A&&Zt(l);return{c(){e=w("div"),n=w("button"),n.textContent=t,s=y(),o&&o.c(),u=y(),p&&p.c(),a=y(),b&&b.c(),h=y(),_&&_.c(),this.h()},l(C){e=S(C,"DIV",{class:!0});var k=I(e);n=S(k,"BUTTON",{class:!0,"data-svelte-h":!0}),ae(n)!=="svelte-1m69saf"&&(n.textContent=t),s=x(k),o&&o.l(k),u=x(k),p&&p.l(k),a=x(k),b&&b.l(k),h=x(k),_&&_.l(k),k.forEach(m),this.h()},h(){T(n,"class","m-1 min-w-32 grow rounded-xl bg-indigo-500 p-2 text-center font-bold text-white hover:bg-indigo-700"),T(e,"class","mt-5 hidden max-w-32 flex-wrap justify-center md:flex")},m(C,k){B(C,e,k),f(e,n),f(e,s),o&&o.m(e,null),f(e,u),p&&p.m(e,null),f(e,a),b&&b.m(e,null),f(e,h),_&&_.m(e,null),E||(c=R(n,"click",l[18]),E=!0)},p(C,k){k[0]&2&&(r=C[1].includes(d.ACTIONS.UPDATE_STATUS)),r?o?o.p(C,k):(o=Qt(C),o.c(),o.m(e,u)):o&&(o.d(1),o=null),k[0]&2&&(i=C[1].includes(d.ACTIONS.VOTE)),i?p?p.p(C,k):(p=Kt(C),p.c(),p.m(e,a)):p&&(p.d(1),p=null),k[0]&2&&(v=C[1].includes(d.ACTIONS.CANCEL)),v?b?b.p(C,k):(b=qt(C),b.c(),b.m(e,h)):b&&(b.d(1),b=null),k[0]&2&&(A=C[1].includes(d.ACTIONS.EXECUTE)),A?_?_.p(C,k):(_=Zt(C),_.c(),_.m(e,null)):_&&(_.d(1),_=null)},d(C){C&&m(e),o&&o.d(),p&&p.d(),b&&b.d(),_&&_.d(),E=!1,c()}}}function Qt(l){let e,n="Update Status",t,s;return{c(){e=w("button"),e.textContent=n,this.h()},l(r){e=S(r,"BUTTON",{class:!0,"data-svelte-h":!0}),ae(e)!=="svelte-1g0c1d1"&&(e.textContent=n),this.h()},h(){T(e,"class","m-1 min-w-32 grow rounded-xl bg-teal-500 p-2 font-bold text-white hover:bg-teal-700")},m(r,u){B(r,e,u),t||(s=R(e,"click",l[19]),t=!0)},p:fe,d(r){r&&m(e),t=!1,s()}}}function Kt(l){let e,n="Vote Yes",t,s,r="Vote No",u,i,a="Vote Abstain",v,h,A="Remove Vote",E,c;return{c(){e=w("button"),e.textContent=n,t=y(),s=w("button"),s.textContent=r,u=y(),i=w("button"),i.textContent=a,v=y(),h=w("button"),h.textContent=A,this.h()},l(o){e=S(o,"BUTTON",{class:!0,"data-svelte-h":!0}),ae(e)!=="svelte-pzkovn"&&(e.textContent=n),t=x(o),s=S(o,"BUTTON",{class:!0,"data-svelte-h":!0}),ae(s)!=="svelte-oxddqv"&&(s.textContent=r),u=x(o),i=S(o,"BUTTON",{class:!0,"data-svelte-h":!0}),ae(i)!=="svelte-1ulc9ps"&&(i.textContent=a),v=x(o),h=S(o,"BUTTON",{class:!0,"data-svelte-h":!0}),ae(h)!=="svelte-12yi5z6"&&(h.textContent=A),this.h()},h(){T(e,"class","m-1 min-w-32 grow rounded-xl bg-green-500 p-2 font-bold text-white hover:bg-green-700"),T(s,"class","m-1 min-w-32 grow rounded-xl bg-red-500 p-2 font-bold text-white hover:bg-red-700"),T(i,"class","m-1 min-w-32 grow rounded-xl bg-gray-500 p-2 font-bold text-white hover:bg-gray-700"),T(h,"class","m-1 min-w-32 grow rounded-xl bg-purple-500 p-2 font-bold text-white hover:bg-purple-700")},m(o,p){B(o,e,p),B(o,t,p),B(o,s,p),B(o,u,p),B(o,i,p),B(o,v,p),B(o,h,p),E||(c=[R(e,"click",l[20]),R(s,"click",l[21]),R(i,"click",l[22]),R(h,"click",l[23])],E=!0)},p:fe,d(o){o&&(m(e),m(t),m(s),m(u),m(i),m(v),m(h)),E=!1,it(c)}}}function qt(l){let e,n="Cancel",t,s;return{c(){e=w("button"),e.textContent=n,this.h()},l(r){e=S(r,"BUTTON",{class:!0,"data-svelte-h":!0}),ae(e)!=="svelte-44uuhb"&&(e.textContent=n),this.h()},h(){T(e,"class","m-1 min-w-32 grow rounded-xl bg-yellow-500 p-2 font-bold text-white hover:bg-yellow-700")},m(r,u){B(r,e,u),t||(s=R(e,"click",l[24]),t=!0)},p:fe,d(r){r&&m(e),t=!1,s()}}}function Zt(l){let e,n="Execute",t,s;return{c(){e=w("button"),e.textContent=n,this.h()},l(r){e=S(r,"BUTTON",{class:!0,"data-svelte-h":!0}),ae(e)!=="svelte-e9fdlx"&&(e.textContent=n),this.h()},h(){T(e,"class","m-1 min-w-32 grow rounded-xl bg-blue-500 p-2 font-bold text-white hover:bg-blue-700")},m(r,u){B(r,e,u),t||(s=R(e,"click",l[25]),t=!0)},p:fe,d(r){r&&m(e),t=!1,s()}}}function Bl(l){let e,n,t=l[3]&&l[2]&&Ht(l);function s(i,a){return i[3]?Rl:Pl}let r=s(l),u=r(l);return{c(){t&&t.c(),e=y(),u.c(),n=Lt()},l(i){t&&t.l(i),e=x(i),u.l(i),n=Lt()},m(i,a){t&&t.m(i,a),B(i,e,a),u.m(i,a),B(i,n,a)},p(i,a){i[3]&&i[2]?t?(t.p(i,a),a[0]&12&&P(t,1)):(t=Ht(i),t.c(),P(t,1),t.m(e.parentNode,e)):t&&(Ce(),M(t,1,1,()=>{t=null}),Ne()),r===(r=s(i))&&u?u.p(i,a):(u.d(1),u=r(i),u&&(u.c(),u.m(n.parentNode,n)))},d(i){i&&(m(e),m(n)),t&&t.d(i),u.d(i)}}}function Ml(l){let e,n,t;function s(u){l[26](u)}let r={$$slots:{default:[Bl]},$$scope:{ctx:l}};return l[2]!==void 0&&(r.showActions=l[2]),e=new Nl({props:r}),gl.push(()=>El(e,"showActions",s)),{c(){Te(e.$$.fragment)},l(u){Ee(e.$$.fragment,u)},m(u,i){we(e,u,i),t=!0},p(u,i){const a={};i[0]&15|i[1]&2&&(a.$$scope={dirty:i,ctx:u}),!n&&i[0]&4&&(n=!0,a.showActions=u[2],Tl(()=>n=!1)),e.$set(a)},i(u){t||(P(e.$$.fragment,u),t=!0)},o(u){M(e.$$.fragment,u),t=!1},d(u){Se(e,u)}}}function Yl(l,e,n){let t,s;rt(l,dl,O=>n(3,t=O)),rt(l,_l,O=>n(27,s=O));let{selectedItem:r={}}=e;const u=ul();let i=[],a=!1;fl(async()=>{h()}),cl(async()=>{h()});function v(){u("refresh")}function h(){t?(n(1,i=[]),r&&(r.status!=d.STATUS.EXECUTED.value&&r.status!=d.STATUS.EXPIRED.value&&(i.push(d.ACTIONS.VOTE),String(t.actor)==r.proposer&&i.push(d.ACTIONS.CANCEL)),r.status==d.STATUS.PASSING.value&&(r.type==d.REF_TYPE.BINDING||r.type==d.REF_TYPE.SEMI_BINDING)&&i.push(d.ACTIONS.EXECUTE),i.push(d.ACTIONS.UPDATE_STATUS)),i.push(d.ACTIONS.DEPOSIT),i.push(d.ACTIONS.REFUND)):n(1,i=[])}async function A(){if(!t){lt.add("Please login to call action",nt.WARNING);return}let O=[{account:d.CONTRACT_NAME,name:d.ACTIONS.UPDATE_STATUS,authorization:[{actor:String(t.actor),permission:String(t==null?void 0:t.permission)}],data:{referendum_id:r.referendum_id,dac_id:s.scope}}];await st(t,O).then(()=>{v()})}async function E(){if(!t){lt.add("Please login to call action",nt.WARNING);return}let O=[{account:d.CONTRACT_NAME,name:d.ACTIONS.CANCEL,authorization:[{actor:String(t.actor),permission:String(t==null?void 0:t.permission)}],data:{referendum_id:r.referendum_id,dac_id:s.scope}}];await st(t,O).then(()=>{v()})}async function c(){if(!t){lt.add("Please login to call action",nt.WARNING);return}let O=[{account:d.CONTRACT_NAME,name:d.ACTIONS.EXECUTE,authorization:[{actor:String(t.actor),permission:String(t==null?void 0:t.permission)}],data:{referendum_id:r.referendum_id,dac_id:s.scope}}];await st(t,O).then(()=>{v()})}function o(O=!1){if(O){const he={actions:r.actions,proposal_title:r.proposal_title,description:r.description};Xt("/referendum/create",{state:{data:he}})}else Xt("/referendum/create")}const p=()=>o(),b=()=>A(),_=()=>{u("onVote",{vote_type:d.VOTE.YES.value,referendum_id:r.referendum_id})},C=()=>{u("onVote",{vote_type:d.VOTE.NO.value,referendum_id:r.referendum_id})},k=()=>{u("onVote",{vote_type:d.VOTE.ABSTAIN.value,referendum_id:r.referendum_id})},N=()=>{u("onVote",{vote_type:d.VOTE.REMOVE.value,referendum_id:r.referendum_id})},X=()=>E(),q=()=>c(),U=()=>n(2,a=!1),me=()=>o(),W=()=>A(),Y=()=>{u("onVote",{vote_type:d.VOTE.YES.value,referendum_id:r.referendum_id})},le=()=>{u("onVote",{vote_type:d.VOTE.NO.value,referendum_id:r.referendum_id})},Q=()=>{u("onVote",{vote_type:d.VOTE.ABSTAIN.value,referendum_id:r.referendum_id})},ne=()=>{u("onVote",{vote_type:d.VOTE.REMOVE.value,referendum_id:r.referendum_id})},g=()=>E(),$=()=>c();function F(O){a=O,n(2,a)}return l.$$set=O=>{"selectedItem"in O&&n(0,r=O.selectedItem)},[r,i,a,t,u,A,E,c,o,p,b,_,C,k,N,X,q,U,me,W,Y,le,Q,ne,g,$,F]}class jl extends ot{constructor(e){super(),ut(this,e,Yl,Ml,at,{selectedItem:0},null,[-1,-1])}}function Jt(l,e,n){const t=l.slice();return t[6]=e[n],t}function el(l){let e,n;return e=new Dl({props:{class:"mr-1 text-yellow-300 ",size:"lg",ariaLabel:"Selected"}}),{c(){Te(e.$$.fragment)},l(t){Ee(e.$$.fragment,t)},m(t,s){we(e,t,s),n=!0},i(t){n||(P(e.$$.fragment,t),n=!0)},o(t){M(e.$$.fragment,t),n=!1},d(t){Se(e,t)}}}function tl(l){let e,n,t,s,r=l[6].name+"",u,i,a,v=((l[1]!=0?l[6].value/l[1]:0)*100).toFixed(2)+"",h,A,E,c,o,p=l[6].value+"",b,_,C,k,N,X,q,U=l[6].selected&&el();function me(){return l[4](l[6])}return{c(){e=w("button"),U&&U.c(),n=y(),t=w("div"),s=w("p"),u=G(r),i=y(),a=w("p"),h=G(v),A=G("%"),E=y(),c=w("p"),o=G("("),b=G(p),_=G(")"),C=y(),this.h()},l(W){e=S(W,"BUTTON",{class:!0});var Y=I(e);U&&U.l(Y),n=x(Y),t=S(Y,"DIV",{class:!0});var le=I(t);s=S(le,"P",{});var Q=I(s);u=L(Q,r),Q.forEach(m),i=x(le),a=S(le,"P",{});var ne=I(a);h=L(ne,v),A=L(ne,"%"),ne.forEach(m),E=x(le),c=S(le,"P",{class:!0});var g=I(c);o=L(g,"("),b=L(g,p),_=L(g,")"),g.forEach(m),le.forEach(m),C=x(Y),Y.forEach(m),this.h()},h(){T(c,"class","text-sm italic md:text-base"),T(t,"class","flex flex-col svelte-tfyro8"),T(e,"class",k=$t(`flex  items-center justify-center px-2 py-0.5 
            text-sm font-bold text-white md:text-base bg-${l[6].color}-500
             w-full overflow-hidden text-wrap opacity-80 hover:opacity-100
             `)+" svelte-tfyro8")},m(W,Y){B(W,e,Y),U&&U.m(e,null),f(e,n),f(e,t),f(t,s),f(s,u),f(t,i),f(t,a),f(a,h),f(a,A),f(t,E),f(t,c),f(c,o),f(c,b),f(c,_),f(e,C),N=!0,X||(q=R(e,"click",me),X=!0)},p(W,Y){l=W,l[6].selected?U?Y&1&&P(U,1):(U=el(),U.c(),P(U,1),U.m(e,n)):U&&(Ce(),M(U,1,1,()=>{U=null}),Ne()),(!N||Y&1)&&r!==(r=l[6].name+"")&&de(u,r),(!N||Y&3)&&v!==(v=((l[1]!=0?l[6].value/l[1]:0)*100).toFixed(2)+"")&&de(h,v),(!N||Y&1)&&p!==(p=l[6].value+"")&&de(b,p),(!N||Y&1&&k!==(k=$t(`flex  items-center justify-center px-2 py-0.5 
            text-sm font-bold text-white md:text-base bg-${l[6].color}-500
             w-full overflow-hidden text-wrap opacity-80 hover:opacity-100
             `)+" svelte-tfyro8"))&&T(e,"class",k)},i(W){N||(P(U),N=!0)},o(W){M(U),N=!1},d(W){W&&m(e),U&&U.d(),X=!1,q()}}}function Gl(l){let e,n,t,s,r,u,i,a,v=$e(l[0]),h=[];for(let E=0;E<v.length;E+=1)h[E]=tl(Jt(l,v,E));const A=E=>M(h[E],1,1,()=>{h[E]=null});return{c(){e=w("div"),n=w("div"),t=w("p"),s=G("Total Vote "),r=G(l[1]),u=y(),i=w("div");for(let E=0;E<h.length;E+=1)h[E].c();this.h()},l(E){e=S(E,"DIV",{class:!0});var c=I(e);n=S(c,"DIV",{class:!0});var o=I(n);t=S(o,"P",{});var p=I(t);s=L(p,"Total Vote "),r=L(p,l[1]),p.forEach(m),o.forEach(m),u=x(c),i=S(c,"DIV",{class:!0});var b=I(i);for(let _=0;_<h.length;_+=1)h[_].l(b);b.forEach(m),c.forEach(m),this.h()},h(){T(n,"class","flex w-full items-center justify-center bg-gray-800 bg-opacity-80 px-2 py-0.5 text-sm text-white md:text-base svelte-tfyro8"),T(i,"class","flex flex-col md:flex-row svelte-tfyro8"),T(e,"class","relative flex flex-col overflow-hidden rounded-lg svelte-tfyro8")},m(E,c){B(E,e,c),f(e,n),f(n,t),f(t,s),f(t,r),f(e,u),f(e,i);for(let o=0;o<h.length;o+=1)h[o]&&h[o].m(i,null);a=!0},p(E,[c]){if((!a||c&2)&&de(r,E[1]),c&7){v=$e(E[0]);let o;for(o=0;o<v.length;o+=1){const p=Jt(E,v,o);h[o]?(h[o].p(p,c),P(h[o],1)):(h[o]=tl(p),h[o].c(),P(h[o],1),h[o].m(i,null))}for(Ce(),o=v.length;o<h.length;o+=1)A(o);Ne()}},i(E){if(!a){for(let c=0;c<v.length;c+=1)P(h[c]);a=!0}},o(E){h=h.filter(Boolean);for(let c=0;c<h.length;c+=1)M(h[c]);a=!1},d(E){E&&m(e),Nt(h,E)}}}function Ll(l,e,n){let t,{items:s=[{name:"Yes",value:10,color:"green",selected:!1,vote_type:"yes"},{name:"No",value:30,color:"red",selected:!1,vote_type:"no"},{name:"Abstain",value:60,color:"gray",selected:!1,vote_type:"abstain"}]}=e,{referendum_id:r=0}=e;const u=ul();function i(v){let h={referendum_id:r,vote_type:v.selected?d.VOTE.REMOVE.value:v.vote_type};u("onVote",h)}const a=v=>{i(v)};return l.$$set=v=>{"items"in v&&n(0,s=v.items),"referendum_id"in v&&n(3,r=v.referendum_id)},l.$$.update=()=>{l.$$.dirty&1&&n(1,t=s.reduce((v,h)=>v+h.value,0))},[s,t,i,r,a]}class hl extends ot{constructor(e){super(),ut(this,e,Ll,Gl,at,{items:0,referendum_id:3})}}function ll(l,e,n){const t=l.slice();return t[28]=e[n],t}function nl(l,e,n){const t=l.slice();return t[31]=e[n],t}function $l(l){let e,n,t,s,r,u,i=$e(l[0]),a=[];for(let c=0;c<i.length;c+=1)a[c]=ol(ll(l,i,c));const v=c=>M(a[c],1,1,()=>{a[c]=null}),h=[Hl,Wl],A=[];function E(c,o){return c[2]?0:1}return s=E(l),r=A[s]=h[s](l),{c(){e=w("div");for(let c=0;c<a.length;c+=1)a[c].c();n=y(),t=w("div"),r.c(),this.h()},l(c){e=S(c,"DIV",{class:!0});var o=I(e);for(let b=0;b<a.length;b+=1)a[b].l(o);n=x(o),t=S(o,"DIV",{class:!0});var p=I(t);r.l(p),p.forEach(m),o.forEach(m),this.h()},h(){T(t,"class","flex justify-center"),T(e,"class","my-4 flex flex-col gap-6 md:my-5")},m(c,o){B(c,e,o);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(e,null);f(e,n),f(e,t),A[s].m(t,null),u=!0},p(c,o){if(o[0]&16329){i=$e(c[0]);let b;for(b=0;b<i.length;b+=1){const _=ll(c,i,b);a[b]?(a[b].p(_,o),P(a[b],1)):(a[b]=ol(_),a[b].c(),P(a[b],1),a[b].m(e,n))}for(Ce(),b=i.length;b<a.length;b+=1)v(b);Ne()}let p=s;s=E(c),s===p?A[s].p(c,o):(Ce(),M(A[p],1,1,()=>{A[p]=null}),Ne(),r=A[s],r?r.p(c,o):(r=A[s]=h[s](c),r.c()),P(r,1),r.m(t,null))},i(c){if(!u){for(let o=0;o<i.length;o+=1)P(a[o]);P(r),u=!0}},o(c){a=a.filter(Boolean);for(let o=0;o<a.length;o+=1)M(a[o]);M(r),u=!1},d(c){c&&m(e),Nt(a,c),A[s].d()}}}function zl(l){let e,n="No Data";return{c(){e=w("div"),e.textContent=n,this.h()},l(t){e=S(t,"DIV",{class:!0,"data-svelte-h":!0}),ae(e)!=="svelte-aldbwn"&&(e.textContent=n),this.h()},h(){T(e,"class","my-4 flex justify-center md:my-5")},m(t,s){B(t,e,s)},p:fe,i:fe,o:fe,d(t){t&&m(e)}}}function Fl(l){let e,n,t;return n=new ml({props:{color:"purple"}}),{c(){e=w("div"),Te(n.$$.fragment),this.h()},l(s){e=S(s,"DIV",{class:!0});var r=I(e);Ee(n.$$.fragment,r),r.forEach(m),this.h()},h(){T(e,"class","my-4 flex justify-center md:my-5")},m(s,r){B(s,e,r),we(n,e,null),t=!0},p:fe,i(s){t||(P(n.$$.fragment,s),t=!0)},o(s){M(n.$$.fragment,s),t=!1},d(s){s&&m(e),Se(n)}}}function sl(l){let e,n;return e=new Vl({props:{color:"#ecc94b",size:"24"}}),{c(){Te(e.$$.fragment)},l(t){Ee(e.$$.fragment,t)},m(t,s){we(e,t,s),n=!0},i(t){n||(P(e.$$.fragment,t),n=!0)},o(t){M(e.$$.fragment,t),n=!1},d(t){Se(e,t)}}}function Xl(l){let e=l[7](l[28].status)+"",n;return{c(){n=G(e)},l(t){n=L(t,e)},m(t,s){B(t,n,s)},p(t,s){s[0]&1&&e!==(e=t[7](t[28].status)+"")&&de(n,e)},d(t){t&&m(n)}}}function rl(l){let e,n;return e=new hl({props:{items:l[10](l[28].token_votes,l[28].referendum_id),referendum_id:l[28].referendum_id}}),e.$on("onVote",l[15]),{c(){Te(e.$$.fragment)},l(t){Ee(e.$$.fragment,t)},m(t,s){we(e,t,s),n=!0},p(t,s){const r={};s[0]&1&&(r.items=t[10](t[28].token_votes,t[28].referendum_id)),s[0]&1&&(r.referendum_id=t[28].referendum_id),e.$set(r)},i(t){n||(P(e.$$.fragment,t),n=!0)},o(t){M(e.$$.fragment,t),n=!1},d(t){Se(e,t)}}}function al(l){let e,n;return e=new hl({props:{items:l[10](l[28].account_votes,l[28].referendum_id),referendum_id:l[28].referendum_id}}),e.$on("onVote",l[16]),{c(){Te(e.$$.fragment)},l(t){Ee(e.$$.fragment,t)},m(t,s){we(e,t,s),n=!0},p(t,s){const r={};s[0]&1&&(r.items=t[10](t[28].account_votes,t[28].referendum_id)),s[0]&1&&(r.referendum_id=t[28].referendum_id),e.$set(r)},i(t){n||(P(e.$$.fragment,t),n=!0)},o(t){M(e.$$.fragment,t),n=!1},d(t){Se(e,t)}}}function il(l){let e,n,t,s,r=l[31].contract_name+"",u,i,a=l[31].action_name+"",v,h,A,E,c,o,p,b;return o=new Cl({props:{data:l[31].action_data}}),{c(){e=w("div"),n=w("div"),t=G("Action: "),s=w("span"),u=G(r),i=G(" - "),v=G(a),h=y(),A=w("div"),E=G("Data: "),c=w("span"),Te(o.$$.fragment),p=y(),this.h()},l(_){e=S(_,"DIV",{class:!0});var C=I(e);n=S(C,"DIV",{class:!0});var k=I(n);t=L(k,"Action: "),s=S(k,"SPAN",{class:!0});var N=I(s);u=L(N,r),i=L(N," - "),v=L(N,a),N.forEach(m),k.forEach(m),h=x(C),A=S(C,"DIV",{class:!0});var X=I(A);E=L(X,"Data: "),c=S(X,"SPAN",{class:!0});var q=I(c);Ee(o.$$.fragment,q),q.forEach(m),X.forEach(m),p=x(C),C.forEach(m),this.h()},h(){T(s,"class","text-white"),T(n,"class","flex-none basis-full md:basis-5/12"),T(c,"class","text-white"),T(A,"class","mx-auto basis-full overflow-auto text-ellipsis md:basis-6/12"),T(e,"class","mt-2 flex w-full flex-row flex-wrap text-start")},m(_,C){B(_,e,C),f(e,n),f(n,t),f(n,s),f(s,u),f(s,i),f(s,v),f(e,h),f(e,A),f(A,E),f(A,c),we(o,c,null),f(e,p),b=!0},p(_,C){(!b||C[0]&1)&&r!==(r=_[31].contract_name+"")&&de(u,r),(!b||C[0]&1)&&a!==(a=_[31].action_name+"")&&de(v,a);const k={};C[0]&1&&(k.data=_[31].action_data),o.$set(k)},i(_){b||(P(o.$$.fragment,_),b=!0)},o(_){M(o.$$.fragment,_),b=!1},d(_){_&&m(e),Se(o)}}}function ol(l){var kt;let e,n,t,s,r,u,i,a,v,h=l[28].referendum_id+"",A,E,c,o,p,b,_,C,k,N=l[28].title+"",X,q,U,me,W,Y=l[28].proposer+"",le,Q,ne,g,$,F,O=l[8](l[28].type)+"",he,ve,ue,Be,se,Oe=l[9](l[28].voting_type)+"",Ae,ke,j,ce,Me,V,K,Z,je,ze=Wt(l[28].expires).format("YYYY-MM-DD HH:mm:ss")+"",He,ft,Fe,ct,Ue,dt,Ve,Ge,Xe=l[28].content_ref+"",Qe,Ke,_t,qe,mt,We,ht,_e,vt,At,re=l[3]&&l[3].referendum_id==((kt=l[28])==null?void 0:kt.referendum_id)&&sl();o=new Al({props:{color:`${l[13](l[28].status)}`,$$slots:{default:[Xl]},$$scope:{ctx:l}}});let J=l[28].voting_type==d.COUNT_TYPE.TOKEN.value&&rl(l),ee=l[28].voting_type==d.COUNT_TYPE.ACCOUNT.value&&al(l),Ye=$e(l[28].acts),H=[];for(let z=0;z<Ye.length;z+=1)H[z]=il(nl(l,Ye,z));const vl=z=>M(H[z],1,1,()=>{H[z]=null});function pl(){return l[17](l[28])}return{c(){e=w("button"),n=w("div"),re&&re.c(),t=y(),s=w("div"),r=w("div"),u=w("div"),i=w("div"),a=G("#: "),v=w("span"),A=G(h),E=y(),c=w("div"),Te(o.$$.fragment),p=y(),b=w("div"),_=w("div"),C=G(`Title:
											`),k=w("span"),X=G(N),q=y(),U=w("div"),me=G("Proposer: "),W=w("span"),le=G(Y),Q=y(),ne=w("div"),g=w("div"),$=G("Type: "),F=w("span"),he=G(O),ve=y(),ue=w("div"),Be=G("Counting Method: "),se=w("span"),Ae=G(Oe),ke=y(),j=w("div"),ce=w("div"),J&&J.c(),Me=y(),ee&&ee.c(),V=y(),K=w("div"),Z=G("Expired At: "),je=w("span"),He=G(ze),ft=y(),Fe=w("div"),ct=y(),Ue=w("div"),dt=G("Tx ID: "),Ve=w("a"),Ge=w("span"),Qe=G(Xe),_t=y();for(let z=0;z<H.length;z+=1)H[z].c();mt=y(),We=w("div"),ht=y(),this.h()},l(z){e=S(z,"BUTTON",{class:!0});var D=I(e);n=S(D,"DIV",{class:!0});var pe=I(n);re&&re.l(pe),pe.forEach(m),t=x(D),s=S(D,"DIV",{class:!0});var be=I(s);r=S(be,"DIV",{class:!0});var ge=I(r);u=S(ge,"DIV",{class:!0});var te=I(u);i=S(te,"DIV",{class:!0});var Le=I(i);a=L(Le,"#: "),v=S(Le,"SPAN",{class:!0});var It=I(v);A=L(It,h),It.forEach(m),Le.forEach(m),E=x(te),c=S(te,"DIV",{class:!0});var Ot=I(c);Ee(o.$$.fragment,Ot),Ot.forEach(m),te.forEach(m),p=x(ge),b=S(ge,"DIV",{class:!0});var Ze=I(b);_=S(Ze,"DIV",{class:!0});var pt=I(_);C=L(pt,`Title:
											`),k=S(pt,"SPAN",{class:!0});var Ut=I(k);X=L(Ut,N),Ut.forEach(m),pt.forEach(m),q=x(Ze),U=S(Ze,"DIV",{class:!0});var bt=I(U);me=L(bt,"Proposer: "),W=S(bt,"SPAN",{class:!0});var Vt=I(W);le=L(Vt,Y),Vt.forEach(m),bt.forEach(m),Ze.forEach(m),Q=x(ge),ne=S(ge,"DIV",{class:!0});var Je=I(ne);g=S(Je,"DIV",{class:!0});var gt=I(g);$=L(gt,"Type: "),F=S(gt,"SPAN",{class:!0});var yt=I(F);he=L(yt,O),yt.forEach(m),gt.forEach(m),ve=x(Je),ue=S(Je,"DIV",{class:!0});var Tt=I(ue);Be=L(Tt,"Counting Method: "),se=S(Tt,"SPAN",{class:!0});var xt=I(se);Ae=L(xt,Oe),xt.forEach(m),Tt.forEach(m),Je.forEach(m),ke=x(ge),j=S(ge,"DIV",{class:!0});var et=I(j);ce=S(et,"DIV",{});var tt=I(ce);J&&J.l(tt),Me=x(tt),ee&&ee.l(tt),tt.forEach(m),V=x(et),K=S(et,"DIV",{class:!0});var Et=I(K);Z=L(Et,"Expired At: "),je=S(Et,"SPAN",{class:!0});var Dt=I(je);He=L(Dt,ze),Dt.forEach(m),Et.forEach(m),et.forEach(m),ge.forEach(m),ft=x(be),Fe=S(be,"DIV",{class:!0}),I(Fe).forEach(m),ct=x(be),Ue=S(be,"DIV",{class:!0});var wt=I(Ue);dt=L(wt,"Tx ID: "),Ve=S(wt,"A",{href:!0,target:!0});var Pt=I(Ve);Ge=S(Pt,"SPAN",{class:!0});var Rt=I(Ge);Qe=L(Rt,Xe),Rt.forEach(m),Pt.forEach(m),wt.forEach(m),_t=x(be);for(let St=0;St<H.length;St+=1)H[St].l(be);be.forEach(m),mt=x(D),We=S(D,"DIV",{class:!0}),I(We).forEach(m),ht=x(D),D.forEach(m),this.h()},h(){var z;T(n,"class","w-8 flex-none place-self-center"),T(v,"class","text-base font-semibold text-white underline md:text-lg"),T(i,"class","text-sm md:text-base"),T(c,"class","mt-1 text-sm md:text-base"),T(u,"class","mb-3 flex basis-full flex-col md:mb-0 md:basis-2/12"),T(k,"class","text-base font-semibold text-white md:text-lg"),T(_,"class","text-sm md:text-base"),T(W,"class","text-base font-semibold text-white md:text-lg"),T(U,"class","mt-1 text-sm md:text-base"),T(b,"class","mb-3 flex basis-full flex-col md:mb-0 md:basis-3/12"),T(F,"class","text-white"),T(g,"class","text-sm md:text-base"),T(se,"class","text-white"),T(ue,"class","text-sm md:text-base"),T(ne,"class","mb-3 flex basis-full flex-col md:mb-0 md:basis-3/12"),T(je,"class","text-white"),T(K,"class","mt-1"),T(j,"class","flex basis-full flex-col md:basis-3/12"),T(r,"class","mx-auto flex basis-full flex-col justify-between text-start md:flex-row md:gap-4"),T(Fe,"class","mx-auto mb-3 mt-5 w-full border-t-2 border-dotted border-gray-500 md:w-2/3"),T(Ge,"class","italic text-blue-400 underline"),T(Ve,"href",Ke=`https://waxblock.io/transaction/${l[28].content_ref}`),T(Ve,"target","_blank"),T(Ue,"class","text-start"),T(s,"class",qe=`basis-full whitespace-normal break-words break-all
								 rounded-2xl border border-solid p-4 shadow-md md:p-5 
								${l[12](l[28].status)} 
								${l[28].referendum_id==((z=l[3])==null?void 0:z.referendum_id)?"backdrop-brightness-200":"backdrop-brightness-125"}`),T(We,"class","w-8 flex-none place-self-center"),T(e,"class","flex flex-row p-1")},m(z,D){B(z,e,D),f(e,n),re&&re.m(n,null),f(e,t),f(e,s),f(s,r),f(r,u),f(u,i),f(i,a),f(i,v),f(v,A),f(u,E),f(u,c),we(o,c,null),f(r,p),f(r,b),f(b,_),f(_,C),f(_,k),f(k,X),f(b,q),f(b,U),f(U,me),f(U,W),f(W,le),f(r,Q),f(r,ne),f(ne,g),f(g,$),f(g,F),f(F,he),f(ne,ve),f(ne,ue),f(ue,Be),f(ue,se),f(se,Ae),f(r,ke),f(r,j),f(j,ce),J&&J.m(ce,null),f(ce,Me),ee&&ee.m(ce,null),f(j,V),f(j,K),f(K,Z),f(K,je),f(je,He),f(s,ft),f(s,Fe),f(s,ct),f(s,Ue),f(Ue,dt),f(Ue,Ve),f(Ve,Ge),f(Ge,Qe),f(s,_t);for(let pe=0;pe<H.length;pe+=1)H[pe]&&H[pe].m(s,null);f(e,mt),f(e,We),f(e,ht),_e=!0,vt||(At=[R(ce,"click",zt(Kl)),R(Ue,"click",zt(ql)),R(e,"click",pl)],vt=!0)},p(z,D){var be,ge;l=z,l[3]&&l[3].referendum_id==((be=l[28])==null?void 0:be.referendum_id)?re?D[0]&9&&P(re,1):(re=sl(),re.c(),P(re,1),re.m(n,null)):re&&(Ce(),M(re,1,1,()=>{re=null}),Ne()),(!_e||D[0]&1)&&h!==(h=l[28].referendum_id+"")&&de(A,h);const pe={};if(D[0]&1&&(pe.color=`${l[13](l[28].status)}`),D[0]&1|D[1]&8&&(pe.$$scope={dirty:D,ctx:l}),o.$set(pe),(!_e||D[0]&1)&&N!==(N=l[28].title+"")&&de(X,N),(!_e||D[0]&1)&&Y!==(Y=l[28].proposer+"")&&de(le,Y),(!_e||D[0]&1)&&O!==(O=l[8](l[28].type)+"")&&de(he,O),(!_e||D[0]&1)&&Oe!==(Oe=l[9](l[28].voting_type)+"")&&de(Ae,Oe),l[28].voting_type==d.COUNT_TYPE.TOKEN.value?J?(J.p(l,D),D[0]&1&&P(J,1)):(J=rl(l),J.c(),P(J,1),J.m(ce,Me)):J&&(Ce(),M(J,1,1,()=>{J=null}),Ne()),l[28].voting_type==d.COUNT_TYPE.ACCOUNT.value?ee?(ee.p(l,D),D[0]&1&&P(ee,1)):(ee=al(l),ee.c(),P(ee,1),ee.m(ce,null)):ee&&(Ce(),M(ee,1,1,()=>{ee=null}),Ne()),(!_e||D[0]&1)&&ze!==(ze=Wt(l[28].expires).format("YYYY-MM-DD HH:mm:ss")+"")&&de(He,ze),(!_e||D[0]&1)&&Xe!==(Xe=l[28].content_ref+"")&&de(Qe,Xe),(!_e||D[0]&1&&Ke!==(Ke=`https://waxblock.io/transaction/${l[28].content_ref}`))&&T(Ve,"href",Ke),D[0]&1){Ye=$e(l[28].acts);let te;for(te=0;te<Ye.length;te+=1){const Le=nl(l,Ye,te);H[te]?(H[te].p(Le,D),P(H[te],1)):(H[te]=il(Le),H[te].c(),P(H[te],1),H[te].m(s,null))}for(Ce(),te=Ye.length;te<H.length;te+=1)vl(te);Ne()}(!_e||D[0]&9&&qe!==(qe=`basis-full whitespace-normal break-words break-all
								 rounded-2xl border border-solid p-4 shadow-md md:p-5 
								${l[12](l[28].status)} 
								${l[28].referendum_id==((ge=l[3])==null?void 0:ge.referendum_id)?"backdrop-brightness-200":"backdrop-brightness-125"}`))&&T(s,"class",qe)},i(z){if(!_e){P(re),P(o.$$.fragment,z),P(J),P(ee);for(let D=0;D<Ye.length;D+=1)P(H[D]);_e=!0}},o(z){M(re),M(o.$$.fragment,z),M(J),M(ee),H=H.filter(Boolean);for(let D=0;D<H.length;D+=1)M(H[D]);_e=!1},d(z){z&&m(e),re&&re.d(),Se(o),J&&J.d(),ee&&ee.d(),Nt(H,z),vt=!1,it(At)}}}function Wl(l){let e,n="Load More",t,s;return{c(){e=w("button"),e.textContent=n,this.h()},l(r){e=S(r,"BUTTON",{class:!0,"data-svelte-h":!0}),ae(e)!=="svelte-ukcxkp"&&(e.textContent=n),this.h()},h(){T(e,"class","rounded bg-blue-500 px-4 py-2 font-bold text-white hover:bg-blue-700")},m(r,u){B(r,e,u),t||(s=R(e,"click",l[18]),t=!0)},p:fe,i:fe,o:fe,d(r){r&&m(e),t=!1,s()}}}function Hl(l){let e,n,t;return n=new ml({props:{color:"purple"}}),{c(){e=w("div"),Te(n.$$.fragment),this.h()},l(s){e=S(s,"DIV",{class:!0});var r=I(e);Ee(n.$$.fragment,r),r.forEach(m),this.h()},h(){T(e,"class","flex justify-center")},m(s,r){B(s,e,r),we(n,e,null),t=!0},p:fe,i(s){t||(P(n.$$.fragment,s),t=!0)},o(s){M(n.$$.fragment,s),t=!1},d(s){s&&m(e),Se(n)}}}function Ql(l){let e,n,t,s,r,u,i,a,v,h,A,E,c;t=new Sl({});const o=[Fl,zl,$l],p=[];function b(_,C){return _[1]?0:_[0].length==0?1:2}return u=b(l),i=p[u]=o[u](l),E=new jl({props:{selectedItem:l[3]}}),E.$on("onVote",l[19]),E.$on("refresh",l[4]),{c(){e=w("div"),n=w("div"),Te(t.$$.fragment),s=y(),r=w("div"),i.c(),a=y(),v=w("div"),h=y(),A=w("div"),Te(E.$$.fragment),this.h()},l(_){e=S(_,"DIV",{class:!0});var C=I(e);n=S(C,"DIV",{class:!0});var k=I(n);Ee(t.$$.fragment,k),s=x(k),r=S(k,"DIV",{class:!0});var N=I(r);i.l(N),N.forEach(m),k.forEach(m),C.forEach(m),a=x(_),v=S(_,"DIV",{class:!0}),I(v).forEach(m),h=x(_),A=S(_,"DIV",{class:!0});var X=I(A);Ee(E.$$.fragment,X),X.forEach(m),this.h()},h(){T(r,"class","mt-10 overflow-x-auto"),T(n,"class","container relative overflow-x-hidden"),T(e,"class","main-content py-6"),T(v,"class","left-side md:flex"),T(A,"class","right-side md:flex")},m(_,C){B(_,e,C),f(e,n),we(t,n,null),f(n,s),f(n,r),p[u].m(r,null),B(_,a,C),B(_,v,C),B(_,h,C),B(_,A,C),we(E,A,null),c=!0},p(_,C){let k=u;u=b(_),u===k?p[u].p(_,C):(Ce(),M(p[k],1,1,()=>{p[k]=null}),Ne(),i=p[u],i?i.p(_,C):(i=p[u]=o[u](_),i.c()),P(i,1),i.m(r,null));const N={};C[0]&8&&(N.selectedItem=_[3]),E.$set(N)},i(_){c||(P(t.$$.fragment,_),P(i),P(E.$$.fragment,_),c=!0)},o(_){M(t.$$.fragment,_),M(i),M(E.$$.fragment,_),c=!1},d(_){_&&(m(e),m(a),m(v),m(h),m(A)),Se(t),p[u].d(),Se(E)}}}const Kl=()=>{},ql=()=>{};function Zl(l,e,n){let t,s;rt(l,dl,g=>n(14,t=g)),rt(l,_l,g=>n(25,s=g));let r=[],u=!0,i=!0,a=!0,v=s,h=null,A={},E;fl(async()=>{Promise.all([o()]).then(()=>{n(1,i=!1)})}),cl(async()=>{v!==s&&(v=s,await c())});async function c(){n(3,h=null),n(1,i=!0),u=!0,n(2,a=!0),E=void 0,n(0,r=[]),Promise.all([o()]).then(()=>{n(1,i=!1)}),t&&Promise.all([b(),p()])}async function o(){n(2,a=!0);const g=await kl(s.name,E,10);if(g){if(u){const{rows:$,next_key:F,planetName:O}=await Il(g);if(O!==s.name)return;n(0,r=[...r,...$]),E=F,u=$.length>=10}n(1,i=!1),n(2,a=!1)}}async function p(){!t||await Ol(String(t.actor))}async function b(){if(!t)return;let g=await Ul(s.name,String(t.actor));g&&(A=g)}function _(g){if(h&&h.referendum_id==g.referendum_id){n(3,h=null);return}else n(3,h=g)}function C(g){switch(g){case d.STATUS.OPEN.value:return d.STATUS.OPEN.name;case d.STATUS.PASSING.value:return d.STATUS.PASSING.name;case d.STATUS.FAILING.value:return d.STATUS.FAILING.name;case d.STATUS.QUORUM_UNMET.value:return d.STATUS.QUORUM_UNMET.name;case d.STATUS.EXPIRED.value:return d.STATUS.EXPIRED.name;case d.STATUS.EXECUTED.value:return d.STATUS.EXECUTED.name;default:return"Unknown"}}function k(g){switch(g){case d.REF_TYPE.BINDING.value:return d.REF_TYPE.BINDING.name;case d.REF_TYPE.SEMI_BINDING.value:return d.REF_TYPE.SEMI_BINDING.name;case d.REF_TYPE.OPINION.value:return d.REF_TYPE.OPINION.name;default:return"Unknown"}}function N(g){switch(g){case d.COUNT_TYPE.TOKEN.value:return d.COUNT_TYPE.TOKEN.name;case d.COUNT_TYPE.ACCOUNT.value:return d.COUNT_TYPE.ACCOUNT.name;default:return"Unknown"}}function X(g,$){return g.map(O=>{let he=!1;if(A&&A.votes){let ve=A.votes.find(ue=>ue.referendum_id==$);ve&&(he=ve.vote==O.name)}return{name:`${O.name.charAt(0).toUpperCase()+O.name.slice(1)}`,vote_type:O.name,value:O.value,color:O.name==d.VOTE.YES.value?"green":O.name==d.VOTE.NO.value?"red":"gray",selected:he}})}async function q(g,$){if(!t){lt.add("Please login to call action",nt.WARNING);return}let F=[{account:d.CONTRACT_NAME,name:d.ACTIONS.CLEAN,authorization:[{actor:String(t.actor),permission:String(t==null?void 0:t.permission)}],data:{account:String(t.actor),dac_id:s.scope}},{account:d.CONTRACT_NAME,name:d.ACTIONS.VOTE,authorization:[{actor:String(t.actor),permission:String(t==null?void 0:t.permission)}],data:{voter:String(t.actor),referendum_id:$,vote:g,dac_id:s.scope}}];await st(t,F)}function U(g){switch(g){case d.STATUS.OPEN.value:return"border-blue-700 shadow-blue-700";case d.STATUS.PASSING.value:return"border-green-700 shadow-green-700";case d.STATUS.FAILING.value:return"border-yellow-700 shadow-yellow-700";case d.STATUS.QUORUM_UNMET.value:return"border-purple-700 shadow-purple-700";case d.STATUS.EXPIRED.value:return"border-gray-700 shadow-gray-700";case d.STATUS.EXECUTED.value:return"border-blue-700 shadow-blue-700";default:return""}}function me(g){switch(g){case d.STATUS.OPEN.value:return"blue";case d.STATUS.PASSING.value:return"green";case d.STATUS.FAILING.value:return"yellow";case d.STATUS.QUORUM_UNMET.value:return"purple";case d.STATUS.EXPIRED.value:return"gray";case d.STATUS.EXECUTED.value:return"blue";default:return"gray"}}const W=g=>{var $,F;($=g==null?void 0:g.detail)!=null&&$.vote_type&&((F=g==null?void 0:g.detail)!=null&&F.referendum_id)&&q(g.detail.vote_type,g.detail.referendum_id)},Y=g=>{var $,F;($=g==null?void 0:g.detail)!=null&&$.vote_type&&((F=g==null?void 0:g.detail)!=null&&F.referendum_id)&&q(g.detail.vote_type,g.detail.referendum_id)},le=g=>_(g),Q=()=>{o()},ne=g=>{var $,F;($=g==null?void 0:g.detail)!=null&&$.vote_type&&((F=g==null?void 0:g.detail)!=null&&F.referendum_id)&&q(g.detail.vote_type,g.detail.referendum_id)};return l.$$.update=()=>{l.$$.dirty[0]&16384&&t&&Promise.all([b(),p()])},[r,i,a,h,c,o,_,C,k,N,X,q,U,me,t,W,Y,le,Q,ne]}class _n extends ot{constructor(e){super(),ut(this,e,Zl,Ql,at,{},null,[-1,-1])}}export{_n as component};
