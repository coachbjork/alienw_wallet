import{s as Tt,e as v,j as x,c as b,a as w,l as z,d as g,k as Z,m as r,i as H,f as i,h as ot,o as Ct,p as We,n as Ke,t as fe,b as _e,q as F,w as Qe,x as Ee,r as M,v as xe,u as Ge,y as Fe,g as Ze}from"../chunks/scheduler.BGxGHEAh.js";import{S as Nt,i as It,c as ke,a as we,m as Pe,t as ee,b as ze,d as J,e as Se,g as De}from"../chunks/index.DmCm9C9p.js";import{g as K,b as rt,t as Xe,T as Je,s as it,e as pe,c as Ot,N as st,h as At}from"../chunks/bundle-mjs.fLspV5ki.js";import{b as kt}from"../chunks/paths.B4hTyFO9.js";import{P as wt}from"../chunks/PlanetMenu.BaILbyHm.js";import{g as Pt,a as St}from"../chunks/awReferendumService.CKSFft3o.js";import{g as xt}from"../chunks/accountKit.BBCu2dSV.js";import{b as zt,e as Dt,p as Lt}from"../chunks/session.CCA_5FAn.js";import{A as Rt}from"../chunks/ArrowLeftOutline.C9YidncZ.js";import{C as yt,a as qt}from"../chunks/CloseCircleSolid.ojsA0O0H.js";function ct(e,l,a){const t=e.slice();return t[49]=l[a],t[50]=l,t[51]=a,t}function ut(e,l,a){const t=e.slice();return t[52]=l[a],t[53]=l,t[54]=a,t}function ft(e,l,a){const t=e.slice();return t[55]=l[a],t[56]=l,t[57]=a,t}function _t(e,l,a){const t=e.slice();return t[58]=l[a],t}function Vt(e){let l,a="Please login first!";return{c(){l=v("p"),l.textContent=a,this.h()},l(t){l=b(t,"P",{class:!0,"data-svelte-h":!0}),Z(l)!=="svelte-144jdqf"&&(l.textContent=a),this.h()},h(){r(l,"class","text-center text-2xl underline underline-offset-4")},m(t,o){H(t,l,o)},p:Ke,i:Ke,o:Ke,d(t){t&&g(l)}}}function Ut(e){let l,a,t,o,_="Title",n,s,p,d,N,R="Proposer",y,T,I,u,m,E="Content",f,c,C,V,G,$,k="Voting Type",P,S,X,de="Select a type",B,Y=K.REF_TYPE.BINDING.name+"",O,D,q=K.REF_TYPE.SEMI_BINDING.name+"",le,te,me=K.REF_TYPE.OPINION.name+"",he,ye,re,ie,Le="Counting Method",Te,Q,ae,Re="Select a type",se,qe=K.COUNT_TYPE.ACCOUNT.name+"",Ce,ce,h=K.COUNT_TYPE.TOKEN.name+"",A,j,ne,ue,oe,Ne="Submit",ge,be,Ie,U=e[4]!=K.REF_TYPE.OPINION.value&&dt(e);return{c(){l=v("div"),a=v("div"),t=v("div"),o=v("label"),o.textContent=_,n=x(),s=v("input"),p=x(),d=v("div"),N=v("label"),N.textContent=R,y=x(),T=v("input"),I=x(),u=v("div"),m=v("label"),m.textContent=E,f=x(),c=v("textarea"),C=x(),V=v("div"),G=v("div"),$=v("label"),$.textContent=k,P=x(),S=v("select"),X=v("option"),X.textContent=de,B=v("option"),O=fe(Y),D=v("option"),le=fe(q),te=v("option"),he=fe(me),ye=x(),re=v("div"),ie=v("label"),ie.textContent=Le,Te=x(),Q=v("select"),ae=v("option"),ae.textContent=Re,se=v("option"),Ce=fe(qe),ce=v("option"),A=fe(h),j=x(),U&&U.c(),ne=x(),ue=v("div"),oe=v("button"),oe.textContent=Ne,this.h()},l(L){l=b(L,"DIV",{class:!0});var W=w(l);a=b(W,"DIV",{class:!0});var ve=w(a);t=b(ve,"DIV",{class:!0});var Oe=w(t);o=b(Oe,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Z(o)!=="svelte-1tj4o9l"&&(o.textContent=_),n=z(Oe),s=b(Oe,"INPUT",{type:!0,id:!0,name:!0,class:!0}),Oe.forEach(g),p=z(ve),d=b(ve,"DIV",{class:!0});var Ve=w(d);N=b(Ve,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Z(N)!=="svelte-b9qbvj"&&(N.textContent=R),y=z(Ve),T=b(Ve,"INPUT",{type:!0,id:!0,name:!0,class:!0}),Ve.forEach(g),ve.forEach(g),I=z(W),u=b(W,"DIV",{class:!0});var Ue=w(u);m=b(Ue,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Z(m)!=="svelte-1hwiy4z"&&(m.textContent=E),f=z(Ue),c=b(Ue,"TEXTAREA",{rows:!0,class:!0,placeholder:!0}),w(c).forEach(g),Ue.forEach(g),C=z(W),V=b(W,"DIV",{class:!0});var Be=w(V);G=b(Be,"DIV",{class:!0});var Me=w(G);$=b(Me,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Z($)!=="svelte-1mfkh3s"&&($.textContent=k),P=z(Me),S=b(Me,"SELECT",{id:!0,name:!0,class:!0});var Ae=w(S);X=b(Ae,"OPTION",{"data-svelte-h":!0}),Z(X)!=="svelte-11isufy"&&(X.textContent=de),B=b(Ae,"OPTION",{});var $e=w(B);O=_e($e,Y),$e.forEach(g),D=b(Ae,"OPTION",{});var et=w(D);le=_e(et,q),et.forEach(g),te=b(Ae,"OPTION",{});var tt=w(te);he=_e(tt,me),tt.forEach(g),Ae.forEach(g),Me.forEach(g),ye=z(Be),re=b(Be,"DIV",{class:!0});var Ye=w(re);ie=b(Ye,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Z(ie)!=="svelte-14fs1sz"&&(ie.textContent=Le),Te=z(Ye),Q=b(Ye,"SELECT",{id:!0,name:!0,class:!0});var je=w(Q);ae=b(je,"OPTION",{"data-svelte-h":!0}),Z(ae)!=="svelte-11isufy"&&(ae.textContent=Re),se=b(je,"OPTION",{});var lt=w(se);Ce=_e(lt,qe),lt.forEach(g),ce=b(je,"OPTION",{});var at=w(ce);A=_e(at,h),at.forEach(g),je.forEach(g),Ye.forEach(g),Be.forEach(g),j=z(W),U&&U.l(W),W.forEach(g),ne=z(L),ue=b(L,"DIV",{class:!0});var nt=w(ue);oe=b(nt,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(oe)!=="svelte-11fuuu4"&&(oe.textContent=Ne),nt.forEach(g),this.h()},h(){r(o,"for","title"),r(o,"class","text-base font-semibold"),r(s,"type","text"),r(s,"id","title"),r(s,"name","title"),r(s,"class","mt-1 rounded-lg border-2 border-gray-300 bg-gray-200 text-black"),r(t,"class","flex grow flex-col"),r(N,"for","proposer"),r(N,"class","text-base font-semibold"),r(T,"type","text"),r(T,"id","proposer"),r(T,"name","proposer"),r(T,"class","mt-1 rounded-lg border-2 border-gray-300 bg-gray-200 text-black"),T.disabled=!0,r(d,"class","flex flex-col"),r(a,"class","flex flex-col flex-wrap gap-4 md:flex-row"),r(m,"for","content"),r(m,"class","text-base font-semibold"),r(c,"rows","9"),r(c,"class","mt-1 rounded-lg border-2 border-gray-300 bg-gray-200 text-black"),r(c,"placeholder","Enter Value"),r(u,"class","flex flex-col"),r($,"for","ref-type"),r($,"class","text-base font-semibold"),X.__value="",F(X,X.__value),X.selected=!0,B.__value=K.REF_TYPE.BINDING.value,F(B,B.__value),D.__value=K.REF_TYPE.SEMI_BINDING.value,F(D,D.__value),te.__value=K.REF_TYPE.OPINION.value,F(te,te.__value),r(S,"id","ref-type"),r(S,"name","ref-type"),r(S,"class","mt-1 rounded-lg border-2 border-gray-300 bg-gray-200 text-black"),e[4]===void 0&&Qe(()=>e[21].call(S)),r(G,"class","flex flex-1 flex-col"),r(ie,"for","ref-counting-type"),r(ie,"class","text-base font-semibold"),ae.__value="",F(ae,ae.__value),ae.selected=!0,se.__value=K.COUNT_TYPE.ACCOUNT.value,F(se,se.__value),ce.__value=K.COUNT_TYPE.TOKEN.value,F(ce,ce.__value),r(Q,"id","ref-counting-type"),r(Q,"name","ref-counting-type"),r(Q,"class","mt-1 rounded-lg border-2 border-gray-300 bg-gray-200 text-black"),e[5]===void 0&&Qe(()=>e[23].call(Q)),r(re,"class","flex flex-1 flex-col"),r(V,"class","flex flex-col gap-4 md:flex-row"),r(l,"class","mx-auto flex w-4/5 flex-col gap-y-4 p-5"),r(oe,"class","rounded-lg bg-indigo-500 p-2 text-center font-bold text-white hover:bg-indigo-700"),r(ue,"class","mt-5 flex justify-center")},m(L,W){H(L,l,W),i(l,a),i(a,t),i(t,o),i(t,n),i(t,s),F(s,e[2]),i(a,p),i(a,d),i(d,N),i(d,y),i(d,T),F(T,e[0].actor),i(l,I),i(l,u),i(u,m),i(u,f),i(u,c),F(c,e[3]),i(l,C),i(l,V),i(V,G),i(G,$),i(G,P),i(G,S),i(S,X),i(S,B),i(B,O),i(S,D),i(D,le),i(S,te),i(te,he),Ee(S,e[4],!0),i(V,ye),i(V,re),i(re,ie),i(re,Te),i(re,Q),i(Q,ae),i(Q,se),i(se,Ce),i(Q,ce),i(ce,A),Ee(Q,e[5],!0),i(l,j),U&&U.m(l,null),H(L,ne,W),H(L,ue,W),i(ue,oe),ge=!0,be||(Ie=[M(s,"input",e[16]),M(T,"input",e[17]),M(c,"input",e[18]),M(c,"input",He),M(c,"focusin",e[19]),M(c,"focusout",e[20]),M(S,"change",e[21]),M(S,"change",e[22]),M(Q,"change",e[23]),M(Q,"change",e[24]),M(oe,"click",e[39])],be=!0)},p(L,W){W[0]&4&&s.value!==L[2]&&F(s,L[2]),W[0]&1&&T.value!==L[0].actor&&F(T,L[0].actor),W[0]&8&&F(c,L[3]),W[0]&16&&Ee(S,L[4]),W[0]&32&&Ee(Q,L[5]),L[4]!=K.REF_TYPE.OPINION.value?U?(U.p(L,W),W[0]&16&&J(U,1)):(U=dt(L),U.c(),J(U,1),U.m(l,null)):U&&(De(),ee(U,1,1,()=>{U=null}),ze())},i(L){ge||(J(U),ge=!0)},o(L){ee(U),ge=!1},d(L){L&&(g(l),g(ne),g(ue)),U&&U.d(),be=!1,xe(Ie)}}}function dt(e){let l,a,t='<label for="action-data" class="text-base font-semibold">Action(s)</label>',o,_,n,s="Transfer TLM",p,d,N="Custom Action",R,y,T,I,u=pe(e[1]),m=[];for(let f=0;f<u.length;f+=1)m[f]=bt(ct(e,u,f));const E=f=>ee(m[f],1,1,()=>{m[f]=null});return{c(){l=v("div"),a=v("div"),a.innerHTML=t,o=x(),_=v("div"),n=v("button"),n.textContent=s,p=x(),d=v("button"),d.textContent=N,R=x();for(let f=0;f<m.length;f+=1)m[f].c();this.h()},l(f){l=b(f,"DIV",{class:!0});var c=w(l);a=b(c,"DIV",{class:!0,"data-svelte-h":!0}),Z(a)!=="svelte-yxn3on"&&(a.innerHTML=t),o=z(c),_=b(c,"DIV",{class:!0});var C=w(_);n=b(C,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(n)!=="svelte-bqu382"&&(n.textContent=s),p=z(C),d=b(C,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(d)!=="svelte-mzhb6e"&&(d.textContent=N),C.forEach(g),R=z(c);for(let V=0;V<m.length;V+=1)m[V].l(c);c.forEach(g),this.h()},h(){r(a,"class","flex flex-row border-b border-gray-500"),r(n,"class","rounded-lg bg-gray-500 p-1 text-center text-base text-white hover:bg-gray-700"),r(d,"class","ml-2 rounded-lg bg-gray-500 p-1 text-center text-base text-white hover:bg-gray-700"),r(_,"class","mt-2 flex flex-row gap-2"),r(l,"class","mt-4 flex flex-col")},m(f,c){H(f,l,c),i(l,a),i(l,o),i(l,_),i(_,n),i(_,p),i(_,d),i(l,R);for(let C=0;C<m.length;C+=1)m[C]&&m[C].m(l,null);y=!0,T||(I=[M(n,"click",e[25]),M(d,"click",e[26])],T=!0)},p(f,c){if(c[0]&7938){u=pe(f[1]);let C;for(C=0;C<u.length;C+=1){const V=ct(f,u,C);m[C]?(m[C].p(V,c),J(m[C],1)):(m[C]=bt(V),m[C].c(),J(m[C],1),m[C].m(l,null))}for(De(),C=u.length;C<m.length;C+=1)E(C);ze()}},i(f){if(!y){for(let c=0;c<u.length;c+=1)J(m[c]);y=!0}},o(f){m=m.filter(Boolean);for(let c=0;c<m.length;c+=1)ee(m[c]);y=!1},d(f){f&&g(l),Ge(m,f),T=!1,xe(I)}}}function ht(e){let l,a=e[58].name+"",t,o;return{c(){l=v("option"),t=fe(a),this.h()},l(_){l=b(_,"OPTION",{});var n=w(l);t=_e(n,a),n.forEach(g),this.h()},h(){l.__value=o=e[58].name,F(l,l.__value)},m(_,n){H(_,l,n),i(l,t)},p(_,n){n[0]&2&&a!==(a=_[58].name+"")&&Ze(t,a),n[0]&2&&o!==(o=_[58].name)&&(l.__value=o,F(l,l.__value))},d(_){_&&g(l)}}}function pt(e){let l,a=pe(e[49].action.fields),t=[];for(let o=0;o<a.length;o+=1)t[o]=mt(ft(e,a,o));return{c(){for(let o=0;o<t.length;o+=1)t[o].c();l=Fe()},l(o){for(let _=0;_<t.length;_+=1)t[_].l(o);l=Fe()},m(o,_){for(let n=0;n<t.length;n+=1)t[n]&&t[n].m(o,_);H(o,l,_)},p(o,_){if(_[0]&2){a=pe(o[49].action.fields);let n;for(n=0;n<a.length;n+=1){const s=ft(o,a,n);t[n]?t[n].p(s,_):(t[n]=mt(s),t[n].c(),t[n].m(l.parentNode,l))}for(;n<t.length;n+=1)t[n].d(1);t.length=a.length}},d(o){o&&g(l),Ge(t,o)}}}function mt(e){let l,a=e[55].name+"",t,o,_,n,s,p,d,N=e[55].type+"",R,y,T,I;function u(){e[32].call(n,e[55],e[50],e[51])}return{c(){l=v("label"),t=fe(a),o=x(),_=v("div"),n=v("textarea"),p=x(),d=v("span"),R=fe(N),y=x(),this.h()},l(m){l=b(m,"LABEL",{for:!0,class:!0});var E=w(l);t=_e(E,a),E.forEach(g),o=z(m),_=b(m,"DIV",{class:!0});var f=w(_);n=b(f,"TEXTAREA",{rows:!0,id:!0,name:!0,class:!0,placeholder:!0}),w(n).forEach(g),p=z(f),d=b(f,"SPAN",{class:!0});var c=w(d);R=_e(c,N),c.forEach(g),y=z(f),f.forEach(g),this.h()},h(){r(l,"for",`field_${e[51]}_${e[57]}`),r(l,"class","mt-1 text-base italic underline"),r(n,"rows","1"),r(n,"id",`field_${e[51]}_${e[57]}`),r(n,"name",`field_${e[51]}_${e[57]}`),r(n,"class","mt-1 w-full resize rounded-lg border-2 border-gray-300 bg-gray-200 text-black"),r(n,"placeholder",s=e[55].name),r(d,"class","ml-1 mt-1 flex items-center justify-center rounded-lg bg-gray-600 px-2 text-white"),r(_,"class","flex flex-col gap-2 md:flex-row")},m(m,E){H(m,l,E),i(l,t),H(m,o,E),H(m,_,E),i(_,n),F(n,e[49].data[e[55].name]),i(_,p),i(_,d),i(d,R),i(_,y),T||(I=[M(n,"input",u),M(n,"input",He),M(n,"focusin",e[33]),M(n,"focusout",e[34])],T=!0)},p(m,E){e=m,E[0]&2&&a!==(a=e[55].name+"")&&Ze(t,a),E[0]&2&&s!==(s=e[55].name)&&r(n,"placeholder",s),E[0]&2&&F(n,e[49].data[e[55].name]),E[0]&2&&N!==(N=e[55].type+"")&&Ze(R,N)},d(m){m&&(g(l),g(o),g(_)),T=!1,xe(I)}}}function gt(e){let l,a,t,o="Authorization",_,n,s,p,d,N,R,y;s=new qt({props:{class:"ml-2 h-6 w-6 text-indigo-500"}});function T(){return e[35](e[51])}let I=pe(e[49].action.authorization),u=[];for(let E=0;E<I.length;E+=1)u[E]=vt(ut(e,I,E));const m=E=>ee(u[E],1,1,()=>{u[E]=null});return{c(){l=v("div"),a=v("div"),t=v("label"),t.textContent=o,_=x(),n=v("button"),ke(s.$$.fragment),p=x();for(let E=0;E<u.length;E+=1)u[E].c();d=x(),this.h()},l(E){l=b(E,"DIV",{class:!0});var f=w(l);a=b(f,"DIV",{class:!0});var c=w(a);t=b(c,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Z(t)!=="svelte-170cpl6"&&(t.textContent=o),_=z(c),n=b(c,"BUTTON",{});var C=w(n);we(s.$$.fragment,C),C.forEach(g),c.forEach(g),p=z(f);for(let V=0;V<u.length;V+=1)u[V].l(f);d=z(f),f.forEach(g),this.h()},h(){r(t,"for","authorization"),r(t,"class","text-base font-semibold"),r(a,"class","flex flex-row"),r(l,"class","mb-3 ml-10 mt-3 flex flex-col")},m(E,f){H(E,l,f),i(l,a),i(a,t),i(a,_),i(a,n),Pe(s,n,null),i(l,p);for(let c=0;c<u.length;c+=1)u[c]&&u[c].m(l,null);i(l,d),N=!0,R||(y=M(n,"click",T),R=!0)},p(E,f){if(e=E,f[0]&4098){I=pe(e[49].action.authorization);let c;for(c=0;c<I.length;c+=1){const C=ut(e,I,c);u[c]?(u[c].p(C,f),J(u[c],1)):(u[c]=vt(C),u[c].c(),J(u[c],1),u[c].m(l,d))}for(De(),c=I.length;c<u.length;c+=1)m(c);ze()}},i(E){if(!N){J(s.$$.fragment,E);for(let f=0;f<I.length;f+=1)J(u[f]);N=!0}},o(E){ee(s.$$.fragment,E),u=u.filter(Boolean);for(let f=0;f<u.length;f+=1)ee(u[f]);N=!1},d(E){E&&g(l),Se(s),Ge(u,E),R=!1,y()}}}function vt(e){let l,a,t,o,_,n,s,p,d,N;function R(){e[36].call(a,e[53],e[54])}function y(){e[37].call(o,e[53],e[54])}s=new yt({props:{class:"ml-2 h-6 w-6 text-red-500"}});function T(){return e[38](e[51],e[54])}return{c(){l=v("div"),a=v("input"),t=x(),o=v("input"),_=x(),n=v("button"),ke(s.$$.fragment),this.h()},l(I){l=b(I,"DIV",{class:!0});var u=w(l);a=b(u,"INPUT",{type:!0,class:!0,placeholder:!0}),t=z(u),o=b(u,"INPUT",{type:!0,class:!0,placeholder:!0}),_=z(u),n=b(u,"BUTTON",{});var m=w(n);we(s.$$.fragment,m),m.forEach(g),u.forEach(g),this.h()},h(){r(a,"type","text"),r(a,"class","m-1 rounded-lg border-2 border-gray-300 bg-gray-200 text-black"),r(a,"placeholder","Account Name"),r(o,"type","text"),r(o,"class","m-1 rounded-lg border-2 border-gray-300 bg-gray-200 text-black"),r(o,"placeholder","Permission Name"),r(l,"class","mt-1 flex flex-col gap-2 md:flex-row")},m(I,u){H(I,l,u),i(l,a),F(a,e[52].actor),i(l,t),i(l,o),F(o,e[52].permission),i(l,_),i(l,n),Pe(s,n,null),p=!0,d||(N=[M(a,"input",R),M(o,"input",y),M(n,"click",T)],d=!0)},p(I,u){e=I,u[0]&2&&a.value!==e[52].actor&&F(a,e[52].actor),u[0]&2&&o.value!==e[52].permission&&F(o,e[52].permission)},i(I){p||(J(s.$$.fragment,I),p=!0)},o(I){ee(s.$$.fragment,I),p=!1},d(I){I&&g(l),Se(s),d=!1,xe(N)}}}function bt(e){let l,a,t=e[51]+1+"",o,_,n,s,p,d,N,R="Select an action...",y,T,I,u,m,E,f,c,C,V;function G(){e[27].call(s,e[50],e[51])}function $(){return e[28](e[51])}let k=pe(e[49].sc_actions),P=[];for(let O=0;O<k.length;O+=1)P[O]=ht(_t(e,k,O));function S(){e[29].call(d,e[50],e[51])}function X(...O){return e[30](e[51],...O)}I=new yt({props:{class:"ml-2 h-6 w-6 text-red-500"}});function de(){return e[31](e[51])}let B=e[49].action.fields.length>0&&pt(e),Y=e[49].action.authorization.length>0&&gt(e);return{c(){l=v("label"),a=fe("Action "),o=fe(t),_=x(),n=v("div"),s=v("input"),p=x(),d=v("select"),N=v("option"),N.textContent=R;for(let O=0;O<P.length;O+=1)P[O].c();y=x(),T=v("button"),ke(I.$$.fragment),u=x(),m=v("div"),B&&B.c(),E=x(),Y&&Y.c(),f=Fe(),this.h()},l(O){l=b(O,"LABEL",{for:!0,class:!0});var D=w(l);a=_e(D,"Action "),o=_e(D,t),D.forEach(g),_=z(O),n=b(O,"DIV",{class:!0});var q=w(n);s=b(q,"INPUT",{type:!0,class:!0,placeholder:!0}),p=z(q),d=b(q,"SELECT",{id:!0,name:!0,class:!0});var le=w(d);N=b(le,"OPTION",{"data-svelte-h":!0}),Z(N)!=="svelte-1p6yz3s"&&(N.textContent=R);for(let he=0;he<P.length;he+=1)P[he].l(le);le.forEach(g),y=z(q),T=b(q,"BUTTON",{class:!0});var te=w(T);we(I.$$.fragment,te),te.forEach(g),q.forEach(g),u=z(O),m=b(O,"DIV",{class:!0});var me=w(m);B&&B.l(me),me.forEach(g),E=z(O),Y&&Y.l(O),f=Fe(),this.h()},h(){r(l,"for","action"),r(l,"class","mt-1 basis-full border-t border-gray-500 text-base italic underline"),r(s,"type","text"),r(s,"class","m-1 rounded-lg border-2 border-gray-300 bg-gray-200 text-black"),r(s,"placeholder","Contract Account"),N.__value="",F(N,N.__value),N.selected=!0,r(d,"id",`action_name_${e[51]}`),r(d,"name",`action_name_${e[51]}`),r(d,"class","m-1 rounded-lg border-2 border-gray-300 bg-gray-200 text-black"),e[49].action.name===void 0&&Qe(S),r(T,"class","close-button"),r(n,"class","mt-2 flex flex-col gap-2 md:flex-row"),r(m,"class","ml-10 mt-3 flex flex-col")},m(O,D){H(O,l,D),i(l,a),i(l,o),H(O,_,D),H(O,n,D),i(n,s),F(s,e[49].sc_account),i(n,p),i(n,d),i(d,N);for(let q=0;q<P.length;q+=1)P[q]&&P[q].m(d,null);Ee(d,e[49].action.name,!0),i(n,y),i(n,T),Pe(I,T,null),H(O,u,D),H(O,m,D),B&&B.m(m,null),H(O,E,D),Y&&Y.m(O,D),H(O,f,D),c=!0,C||(V=[M(s,"input",G),M(s,"change",$),M(d,"change",S),M(d,"change",X),M(T,"click",de)],C=!0)},p(O,D){if(e=O,D[0]&2&&s.value!==e[49].sc_account&&F(s,e[49].sc_account),D[0]&2){k=pe(e[49].sc_actions);let q;for(q=0;q<k.length;q+=1){const le=_t(e,k,q);P[q]?P[q].p(le,D):(P[q]=ht(le),P[q].c(),P[q].m(d,null))}for(;q<P.length;q+=1)P[q].d(1);P.length=k.length}D[0]&2&&Ee(d,e[49].action.name),e[49].action.fields.length>0?B?B.p(e,D):(B=pt(e),B.c(),B.m(m,null)):B&&(B.d(1),B=null),e[49].action.authorization.length>0?Y?(Y.p(e,D),D[0]&2&&J(Y,1)):(Y=gt(e),Y.c(),J(Y,1),Y.m(f.parentNode,f)):Y&&(De(),ee(Y,1,1,()=>{Y=null}),ze())},i(O){c||(J(I.$$.fragment,O),J(Y),c=!0)},o(O){ee(I.$$.fragment,O),ee(Y),c=!1},d(O){O&&(g(l),g(_),g(n),g(u),g(m),g(E),g(f)),Ge(P,O),Se(I),B&&B.d(),Y&&Y.d(O),C=!1,xe(V)}}}function Bt(e){let l,a,t,o,_,n,s,p,d,N="Create A New Referendum",R,y,T,I,u,m="",E,f,c="",C;t=new wt({}),s=new Rt({props:{class:"h-14 w-14 text-indigo-400 hover:contrast-200 "}});const V=[Ut,Vt],G=[];function $(k,P){return k[0]?0:1}return y=$(e),T=G[y]=V[y](e),{c(){l=v("div"),a=v("div"),ke(t.$$.fragment),o=x(),_=v("div"),n=v("a"),ke(s.$$.fragment),p=x(),d=v("h1"),d.textContent=N,R=x(),T.c(),I=x(),u=v("div"),u.innerHTML=m,E=x(),f=v("div"),f.innerHTML=c,this.h()},l(k){l=b(k,"DIV",{class:!0});var P=w(l);a=b(P,"DIV",{class:!0});var S=w(a);we(t.$$.fragment,S),o=z(S),_=b(S,"DIV",{class:!0});var X=w(_);n=b(X,"A",{href:!0});var de=w(n);we(s.$$.fragment,de),de.forEach(g),p=z(X),d=b(X,"H1",{class:!0,"data-svelte-h":!0}),Z(d)!=="svelte-1ttnrzk"&&(d.textContent=N),X.forEach(g),R=z(S),T.l(S),S.forEach(g),P.forEach(g),I=z(k),u=b(k,"DIV",{class:!0,"data-svelte-h":!0}),Z(u)!=="svelte-778oci"&&(u.innerHTML=m),E=z(k),f=b(k,"DIV",{class:!0,"data-svelte-h":!0}),Z(f)!=="svelte-118cbuz"&&(f.innerHTML=c),this.h()},h(){r(n,"href",`${kt}/referendum`),r(d,"class","mx-auto my-4 text-2xl font-bold text-orange-500"),r(_,"class","flex flex-row items-center justify-center"),r(a,"class","container"),r(l,"class","main-content py-6"),r(u,"class","left-side"),r(f,"class","right-side")},m(k,P){H(k,l,P),i(l,a),Pe(t,a,null),i(a,o),i(a,_),i(_,n),Pe(s,n,null),i(_,p),i(_,d),i(a,R),G[y].m(a,null),H(k,I,P),H(k,u,P),H(k,E,P),H(k,f,P),C=!0},p(k,P){let S=y;y=$(k),y===S?G[y].p(k,P):(De(),ee(G[S],1,1,()=>{G[S]=null}),ze(),T=G[y],T?T.p(k,P):(T=G[y]=V[y](k),T.c()),J(T,1),T.m(a,null))},i(k){C||(J(t.$$.fragment,k),J(s.$$.fragment,k),J(T),C=!0)},o(k){ee(t.$$.fragment,k),ee(s.$$.fragment,k),ee(T),C=!1},d(k){k&&(g(l),g(I),g(u),g(E),g(f)),Se(t),Se(s),G[y].d()}}}function He(e){e.target.style.height="auto",e.target.style.height=e.target.scrollHeight+"px"}function Et(e){e.target.style.height="auto"}function Mt(e,l,a){let t,o;ot(e,it,h=>a(0,t=h)),ot(e,Ot,h=>a(15,o=h));let _=o,n=null,s={},p=[],d=[],N="- No Title -",R="- No Content -",y=K.REF_TYPE.OPINION.value,T=K.COUNT_TYPE.ACCOUNT.value;Ct(async()=>{o&&(o&&o.account,d[0]&&d[0],await C(o.account),await m(),o&&o.account,d[0]&&d[0])});async function I(){a(14,_=o),await C(o.account),await m(),o&&o.account,d[0]&&d[0],a(1,p=[]),t&&await u()}async function u(){if(!t)return;let h=await St(String(t.actor));h&&(n=h)}async function m(){let h=await Pt(o.name);h&&(s=h)}function E(){a(1,p=[...p,{sc_account:"",action:{name:"",fields:[],authorization:[],base:""},sc_actions:[],data:{}}])}async function f(){a(1,p=[{sc_account:rt.CONTRACT_NAME,action:{name:"",fields:[],authorization:[],base:""},sc_actions:rt.ACTIONS_ABI,data:{}}]),G("transfer",p.length-1),a(1,p[p.length-1].data={from:o?o.account:"",to:"",quantity:"",memo:""},p)}function c(h){a(1,p=p.filter((A,j)=>j!==h))}async function C(h){d=(await xt(h)).data.permissions.map(j=>String(j.perm_name))}async function V(h){const A=await zt(p[h].sc_account);a(1,p[h].action={name:"",fields:[],authorization:[],base:""},p),a(1,p[h].data={},p),a(1,p[h].sc_actions=A,p)}function G(h,A){if(h===""){a(1,p[A].action={name:"",fields:[],authorization:[],base:""},p),a(1,p[A].data={},p);return}let j=Object.assign({},p[A].sc_actions.find(ne=>ne.name===h));j.authorization=[{actor:o?o.account:"",permission:d[0]?d[0]:""}],a(1,p[A].action=j,p)}function $(h){a(1,p[h].action.authorization=[...p[h].action.authorization,{actor:"",permission:""}],p)}function k(h,A){a(1,p[h].action.authorization=p[h].action.authorization.filter((j,ne)=>ne!==A),p)}async function P(){var j,ne,ue,oe,Ne,ge,be,Ie;if(!t){Xe.add("Please login to call action",Je.WARNING);return}if(!s.fee){Xe.add("The planet hasn't setup creation config yet.",Je.WARNING);return}let h=[];for(let U of p)try{let L=Object.assign({},U.data);Object.keys(L).forEach(ve=>{try{L[ve]=JSON.parse(L[ve])}catch{}});const W=await Dt(st.from(U.sc_account),st.from(U.action.name),U.action.authorization,L);h.push(W)}catch(L){Xe.add(`Error encoding action data: ${L.message}`,Je.WARNING);return}let A=[];if(!n.account||!n.deposit)s.fee[y].quantity.units.equals(0)||A.push({account:s.fee[y].contract,name:"transfer",authorization:[{actor:String(t.actor),permission:String(t==null?void 0:t.permission)}],data:{from:String(t.actor),to:K.CONTRACT_NAME,quantity:String(s.fee[y].quantity),memo:"Deposit for referendum creation"}});else if(((j=n==null?void 0:n.deposit)==null?void 0:j.contract)!=((ne=s.fee[y])==null?void 0:ne.contract)||((ue=n==null?void 0:n.deposit)==null?void 0:ue.quantity.symbol.name)!=((oe=s.fee[y])==null?void 0:oe.quantity.symbol.name)||((Ne=n==null?void 0:n.deposit)==null?void 0:Ne.quantity.symbol.precision)!=((ge=s.fee[y])==null?void 0:ge.quantity.symbol.precision))A.push({account:K.CONTRACT_NAME,name:K.ACTIONS.REFUND,authorization:[{actor:String(t.actor),permission:String(t==null?void 0:t.permission)}],data:{account:String(t.actor)}}),s.fee[y].quantity.units.equals(0)||A.push({account:s.fee[y].contract,name:"transfer",authorization:[{actor:String(t.actor),permission:String(t==null?void 0:t.permission)}],data:{from:String(t.actor),to:K.CONTRACT_NAME,quantity:String(s.fee[y].quantity),memo:"Deposit for referendum creation"}});else if(n&&parseInt((be=n==null?void 0:n.deposit)==null?void 0:be.quantity.units)<parseInt((Ie=s.fee[y])==null?void 0:Ie.quantity.units)){let U=s.fee[y].quantity.units.subtracting(n.deposit.quantity.units);if(U>0){let L=At.fromUnits(U,n.deposit.quantity.symbol);A.push({account:s.fee[y].contract,name:"transfer",authorization:[{actor:String(t.actor),permission:String(t==null?void 0:t.permission)}],data:{from:String(t.actor),to:K.CONTRACT_NAME,quantity:String(L),memo:"Deposit for referendum creation"}})}}A.push({account:K.CONTRACT_NAME,name:K.ACTIONS.PROPOSE,authorization:[{actor:String(t.actor),permission:String(t==null?void 0:t.permission)}],data:{proposer:String(t.actor),type:y,voting_type_name:T,title:N,content:R,dac_id:o.scope,acts:h}}),await Lt(t,A)}function S(){N=this.value,a(2,N)}function X(){t.actor=this.value,it.set(t)}function de(){R=this.value,a(3,R)}const B=()=>He(event),Y=()=>Et(event);function O(){y=We(this),a(4,y)}const D=h=>{var A,j;(A=h==null?void 0:h.target)!=null&&A.value&&a(4,y=(j=h==null?void 0:h.target)==null?void 0:j.value)};function q(){T=We(this),a(5,T)}const le=h=>{var A,j;(A=h==null?void 0:h.target)!=null&&A.value&&a(5,T=(j=h==null?void 0:h.target)==null?void 0:j.value)},te=()=>{f()},me=()=>{E()};function he(h,A){h[A].sc_account=this.value,a(1,p)}const ye=h=>{V(h)};function re(h,A){h[A].action.name=We(this),a(1,p)}const ie=(h,A)=>{var j;G((j=A==null?void 0:A.target)==null?void 0:j.value,h)},Le=h=>{c(h)};function Te(h,A,j){A[j].data[h.name]=this.value,a(1,p)}const Q=()=>He(event),ae=()=>Et(event),Re=h=>{$(h)};function se(h,A){h[A].actor=this.value,a(1,p)}function qe(h,A){h[A].permission=this.value,a(1,p)}const Ce=(h,A)=>{k(h,A)},ce=()=>P();return e.$$.update=()=>{e.$$.dirty[0]&49152&&_!==o&&I(),e.$$.dirty[0]&1&&t&&u()},[t,p,N,R,y,T,E,f,c,V,G,$,k,P,_,o,S,X,de,B,Y,O,D,q,le,te,me,he,ye,re,ie,Le,Te,Q,ae,Re,se,qe,Ce,ce]}class Zt extends Nt{constructor(l){super(),It(this,l,Mt,Bt,Tt,{},null,[-1,-1])}}export{Zt as component};
